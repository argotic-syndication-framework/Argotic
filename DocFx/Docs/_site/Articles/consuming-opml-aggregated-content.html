<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Consuming OPML aggregated content </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Consuming OPML aggregated content ">
    <meta name="generator" content="docfx 2.37.1.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="consuming-opml-aggregated-content">Consuming OPML aggregated content</h1>

<p>Outline Processor Markup Language (OPML) describes a format for storing outlines in XML. The purpose of this format is to provide a way to exchange information between outliners and Internet services. OPML has also become popular as a format for exchanging subscription lists between feed readers and aggregators. An outline is a tree, where each node contains a set of named attributes with string values. The framework handles OPML as just another syndication resource, meaning it implements the <em>ISyndicationResource</em> interface and has an API that should be familiar to those who have used the other framework syndication resource entities.</p>
<p>By default, when you consume OPML outlines using the framework API classes, any syndication extension that is natively supported by the framework is automatically retrieved from the OPML syndication data source. The framework also attempts to strip invalid XML hexadecimal characters from malformed outlines and will auto-detect XML language encodings if specified by the data source.</p>
<h2 id="example-1-consuming-an-external-opml-outline">Example #1: Consuming an external OPML outline</h2>
<p>The simplest way to consume an external OPML outline is to utilize the static <em>Create</em> method that the <em>OpmlDocument</em> class exposes. This method is provided to handle the common scenario of consuming an outline that is available via a <em>Uri</em>.</p>
<h3 id="how-to-consume-an-opml-document">How to consume an OPML document</h3>
<pre><code>using Argotic.Syndication;

OpmlDocument document = OpmlDocument.Create(new Uri(&quot;http://blog.oppositionallydefiant.com/opml.axd&quot;));
</code></pre>
<h2 id="example-2-consuming-an-opml-outline-from-multiple-data-sources">Example #2: Consuming an OPML outline from multiple data sources</h2>
<p>OPML outlines may also consumed using the overloaded <em>Load</em> method, which is defined on the <em>ISyndicationResource</em> interface. This method's overloads provide a means of consuming outlines from a variety of data sources, including <em>IXPathNavigable</em>, <em>Stream</em>, <em>XmlReader</em>, and <em>Uri</em>.</p>
<h3 id="how-to-load-an-opml-outline-from-multiple-data-sources">How to load an OPML outline from multiple data sources</h3>
<pre><code>using System.IO;
using System.Xml;
using System.Xml.Xpath;
using Argotic.Syndication;

OpmlDocument document = new OpmlDocument();

using (FileStream stream = new FileStream(&quot;SimpleBlogroll.xml&quot;, FileMode.Open, FileAccess.Read))
{
    document.Load(stream);
}

document    = new OpmlDocument();
using (FileStream stream = new FileStream(&quot;SimpleBlogroll.xml&quot;, FileMode.Open, FileAccess.Read))
{
    XmlReaderSettings settings = new XmlReaderSettings();
    settings.IgnoreComments = true;
    settings.IgnoreWhitespace = true;

    using (XmlReader reader = XmlReader.Create(stream, settings))
    {
        document.Load(reader);
    }
}

document = new OpmlDocument();
using (FileStream stream = new FileStream(&quot;SimpleBlogroll.xml&quot;, FileMode.Open, FileAccess.Read))
{
    document.Load(new XPathDocument(stream));
}
</code></pre>
<p>Sample file that can be used with the above code example: [file:SimpleBlogroll.xml]</p>
<h2 id="example-3-specifying-the-set-of-features-to-support-when-loading-syndicated-content">Example #3: Specifying the set of features to support when loading syndicated content</h2>
<p>The framework provides a means of specifying the set of features that are supported when loading a syndication resource via the <em>SyndicationResourceLoadSettings</em> class. This class is passed as an argument to the <em>Create</em> and <em>Load</em> methods of the syndication resource in order to configure how the load operation is performed.</p>
<p>The <em>SyndicationResourceLoadSettings</em> class exposes the following properties:</p>
<ul>
<li><strong>AutoDetectExtensions</strong> - Indicates if syndication extensions supported by the load operation are automatically determined based on the XML namespaces declared on the syndication resource.</li>
<li><strong>CharacterEncoding</strong> - Indicates the character encoding to use when parsing a syndication resource.</li>
<li><strong>RetrievalLimit</strong> - Determines the maximum number of resource entities to retrieve from a syndication resource.</li>
<li><strong>SupportedExtensions</strong> - Indicates the custom syndication extensions that you wish to support.</li>
<li><strong>Timeout</strong> - Specifies the amount of time after which asynchronous load operations will time out.</li>
</ul>
<h3 id="how-to-limit-the-number-of-opml-outlines-that-are-processed">How to limit the number of OPML outlines that are processed</h3>
<pre><code>using Argotic.Common;
using Argotic.Syndication;

SyndicationResourceLoadSettings settings = new SyndicationResourceLoadSettings();
settings.RetrievalLimit = 5;

Uri documentUrl = new Uri(&quot;http://blog.oppositionallydefiant.com/opml.axd&quot;);
OpmlDocument document = OpmlDocument.Create(documentUrl, settings);

foreach (OpmlOutline outline in document.Outlines)
{
    // The outlines have been limited to the first 5 in the OPML document
}
</code></pre>
<h4 id="for-more-information-about-opml">For more information about OPML</h4>
<ul>
<li><a href="">http://www.opml.org</a></li>
<li><a href="">http://en.wikipedia.org/wiki/OPML</a></li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/endjin/Argotic/blob/feature/DocFx/DocFx/Articles/consuming-opml-aggregated-content.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
